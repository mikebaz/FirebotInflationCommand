(()=>{"use strict";var __webpack_exports__={};({927:function(__unused_webpack_module,exports){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))};Object.defineProperty(exports,"__esModule",{value:!0});const script={getScriptManifest:()=>({name:"Firebot Inflation Command",description:"Does an inflation calculation and returns it in chat.",author:"Michael C. Bazarewsky",version:"1.0.0",firebotVersion:"5"}),getDefaultParameters:()=>({}),run:runRequest=>new Promise(((resolve,reject)=>__awaiter(void 0,void 0,void 0,(function*(){const{logger}=runRequest.modules;logger.debug("Inflation command starting");const args=runRequest.trigger.metadata.userCommand.args;let message="";if(2!=args.length)message="Sorry, the command requires the amount and the starting year as numbers.";else{let USDollar=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),amount=parseFloat(args[0]),amountCurrency=USDollar.format(amount),startYear=parseInt(args[1]),startDate=new Date(startYear,0,1),startDateString=startDate.toISOString(),endDate=new Date,endDateString=endDate.toISOString(),endYear=endDate.getFullYear();if(logger.debug(`Amount: ${amount}, startYear: ${startYear}, endYear: ${endYear}, startDate: ${startDateString}, endDate: ${endDateString}`),startYear<1913||startDate>endDate)message="Sorry, the starting year must be between 1913 and the current year.  Please be sure to use the amount, followed by the year.";else{const requestObject={country:"united-states",start:startDateString,end:endDateString,amount,format:!0},apiUrl="https://www.statbureau.org/calculate-inflation-price-jsonp?"+Object.entries(requestObject).map((([key,val])=>`${key}=${encodeURIComponent(val)}`)).join("&");logger.debug("calling ",apiUrl);try{const response=yield fetch(apiUrl),responseText=(yield response.text()).replace(/[\$\(\)\" ]/g,"");logger.debug("responseText: ",responseText);message=`The inflation-adjusted value of ${amountCurrency} in ${startYear} is ${USDollar.format(parseFloat(responseText))} in ${endYear}. ( source: https://www.statbureau.org )`}catch(error){message="Sorry, failed to get the inflation data: "+error}logger.debug(message)}}let effects=[];const thisEffect={type:"firebot:chat",message,chatter:"Bot"};effects.push(thisEffect),logger.debug("Done.");resolve({success:!0,errorMessage:"Sorry, failed to get the inflation result.",effects})}))))};exports.default=script}})[927](0,__webpack_exports__),module.exports=__webpack_exports__.default})();